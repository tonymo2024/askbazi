# 八字算命程式

一個基於Python 3.13的專業八字算命程式，能夠根據用戶輸入的中文姓名、出生日期和時間，生成包含10個章節的詳細算命報告，並輸出為PDF格式。

## 功能特點

✅ **精確的八字計算**
- 支持公曆轉農曆，準確計算年月日時四柱
- 完整的天干地支排盤系統
- 精準的大運和流年計算

✅ **完整的命理分析**
- 五行平衡分析
- 喜用神智能判斷
- 個性化命理解讀

✅ **豐富的內容生成**
- 10個專業章節，涵蓋人生各個方面
- 根據八字組合生成個性化內容
- 專業的命理術語和分析

✅ **專業的PDF輸出**
- 模仿傳統命書風格
- 支持中文排版
- 完整的表格和圖表展示

## 系統要求

- Python 3.11+ (建議使用 Python 3.13)
- 操作系統：Windows、macOS、Linux
- 內存：至少 512MB
- 硬盤空間：至少 100MB

## 安裝依賴

```bash
pip install reportlab lunar-python jieba
```

## 文件結構

```
八字算命程式/
├── fortune_teller.py          # 主程式（交互式界面）
├── bazi_calculator.py         # 八字計算模組
├── content_generator.py       # 內容生成模組
├── pdf_generator.py          # PDF生成模組
├── demo_fortune_teller.py    # 示例運行腳本
├── test_fortune_teller.py    # 自動化測試腳本
└── README.md                 # 說明文檔
```

## 使用方法

### 方法一：交互式使用

```bash
python3.11 fortune_teller.py
```

按照提示輸入以下信息：
1. 姓名（中文）
2. 出生日期（格式：YYYY-MM-DD）
3. 出生時間（格式：HH:MM）
4. 性別（男/女）

程式將自動計算八字並生成PDF報告。

### 方法二：查看示例

```bash
python3.11 demo_fortune_teller.py
```

運行預設的示例案例，快速了解程式功能。

### 方法三：運行測試

```bash
python3.11 test_fortune_teller.py
```

運行自動化測試，驗證所有模組功能。

## 輸出內容

生成的PDF報告包含以下10個章節：

1. **命主資料及八字大運** - 基本信息和八字排盤
2. **人生總論** - 性格特點和人生模式分析
3. **事業總論** - 事業發展方向和建議
4. **財運總論** - 財運分析和理財建議
5. **姻緣總論** - 婚姻感情運勢分析
6. **健康總論** - 健康狀況和養生建議
7. **六親總論** - 家庭關係和人際運勢
8. **五十年大運總論** - 長期運勢變化趨勢
9. **十年流年預測** - 近期年份運勢預測
10. **簡易催運指南** - 開運方法和風水建議

## 使用示例

```python
from bazi_calculator import BaziCalculator
from content_generator import ContentGenerator
from pdf_generator import FortuneReportPDF
import datetime

# 創建實例
calculator = BaziCalculator()
generator = ContentGenerator()
pdf_gen = FortuneReportPDF()

# 設置基本信息
name = "張三"
birth_date = datetime.date(1985, 5, 29)
birth_time = datetime.time(14, 5)
gender = "男"

# 計算八字
bazi_info = calculator.calculate_bazi(birth_date, birth_time)
wuxing_analysis = calculator.analyze_wuxing_balance(bazi_info)
dayun = calculator.calculate_dayun(bazi_info, gender, birth_date)

# 生成內容
all_contents = {
    'life_summary': generator.generate_life_summary(bazi_info, wuxing_analysis),
    # ... 其他章節
}

# 生成PDF
pdf_gen.generate_pdf(
    "算命報告.pdf", name, bazi_info, wuxing_analysis, dayun,
    birth_date, birth_time, gender, all_contents
)
```

## 技術架構

### 核心模組

1. **BaziCalculator** - 八字計算引擎
   - 天干地支計算
   - 農曆轉換
   - 大運排盤
   - 五行分析

2. **ContentGenerator** - 內容生成引擎
   - 模板化內容生成
   - 個性化文字調整
   - 專業術語處理

3. **FortuneReportPDF** - PDF生成引擎
   - 中文字體支持
   - 傳統風格設計
   - 表格和圖表生成

### 依賴庫

- **reportlab** - PDF生成庫
- **lunar-python** - 農曆轉換庫
- **jieba** - 中文文本處理庫

## 注意事項

1. **字體支持**：程式會自動嘗試加載中文字體，如果失敗會使用系統默認字體。

2. **日期格式**：請使用公曆日期輸入，程式會自動轉換為農曆進行計算。

3. **時間精度**：出生時間會影響時柱計算，請盡量提供準確的時間。

4. **內容僅供參考**：本程式生成的內容僅供娛樂和參考，不應作為人生決策的唯一依據。

## 常見問題

**Q: 為什麼PDF中的中文顯示不正常？**
A: 這可能是字體問題。程式會嘗試自動加載中文字體，如果失敗會使用系統默認字體。

**Q: 計算結果準確嗎？**
A: 程式使用標準的八字計算方法，包括農曆轉換和天干地支推算，計算結果是準確的。

**Q: 可以批量處理多個人的資料嗎？**
A: 目前版本主要針對單個用戶設計，如需批量處理可以修改主程式邏輯。

**Q: 如何自定義內容模板？**
A: 可以修改 `content_generator.py` 中的模板內容來自定義輸出內容。

## 開發信息

- **開發語言**：Python 3.11+
- **開發時間**：2024年
- **版本**：1.0.0
- **許可證**：MIT License

## 更新日誌

### v1.0.0 (2024-07-26)
- 初始版本發布
- 完整的八字計算功能
- 10個章節的內容生成
- PDF報告輸出
- 交互式用戶界面

## 聯繫方式

如有問題或建議，請通過以下方式聯繫：
- 提交 Issue
- 發送郵件
- 技術討論

---

**免責聲明**：本程式生成的算命內容僅供娛樂和參考，不應作為人生重大決策的依據。請理性對待命理文化，科學規劃人生。

